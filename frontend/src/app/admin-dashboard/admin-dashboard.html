<div class="admin-dashboard">
      <!-- Header -->
      <div class="dashboard-header">
        <h1>Admin Dashboard</h1>
        
      </div>

      <!-- Navigation Tabs -->
      <div class="nav-tabs">
        <button 
          *ngFor="let tab of tabs" 
          [class.active]="activeTab === tab.id"
          (click)="setActiveTab(tab.id)"
          class="tab-btn">
          {{ tab.label }}
        </button>
      </div>

      <!-- Overview Tab -->
      <div *ngIf="activeTab === 'overview'" class="tab-content">
        <div class="stats-grid">
            <div class="stat-card">
            <h3>Total Parkings</h3>
            <div class="stat-number">{{ stats.totalParkings }}</div>
          </div>
          <div class="stat-card">

            <h3>Total Bookings</h3>
            <div class="stat-number">{{ stats.totalBookings }}</div>
          </div>
          <div class="stat-card">
            <h3>Total Places</h3>
            <div class="stat-number">{{ stats.totalPlaces }}</div>
          </div>
          <div class="stat-card available">
            <h3>Available Places</h3>
            <div class="stat-number">{{ stats.availablePlaces }}</div>
          </div>
          <div class="stat-card occupied">
            <h3>Occupied Places</h3>
            <div class="stat-number">{{ stats.occupiedPlaces }}</div>
          </div>
          <div class="stat-card reserved">
            <h3>Reserved Places</h3>
            <div class="stat-number">{{ stats.reservedPlaces }}</div>
          </div>
          <div class="stat-card blocked">
            <h3>Blocked Places</h3>
            <div class="stat-number">{{ stats.blockedPlaces }}</div>
          </div>
           <div class="stat-card available">
            <h3>users</h3>
            <div class="stat-number">{{ stats.totalUsers }}</div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
          <h2>Quick Actions</h2>
          <div class="action-buttons">
            <button (click)="refreshData()" class="action-btn primary">
              <i class="icon">üîÑ</i> Refresh Data
            </button>
            <button (click)="setActiveTab('places')" class="action-btn">
              <i class="icon">üÖøÔ∏è</i> Manage Places
            </button>
            <button (click)="setActiveTab('bookings')" class="action-btn">
              <i class="icon">üìÖ</i> View Bookings
            </button>

          </div>
        </div>
      </div>

      <!-- Bookings Tab -->
      <div *ngIf="activeTab === 'bookings'" class="tab-content">
        <div class="section-header">
          <h2>Bookings Management</h2>
          <button (click)="loadBookings()" class="refresh-btn">Refresh</button>
        </div>
        
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Booking ID</th>
                <th>User ID</th>
                <th>Parking ID</th>
                <th>Place ID</th>
                <th>Start Time</th>
                <th>End Time</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let booking of bookings; trackBy: trackByBookingId">
                <!-- <td>{{ booking.id || 'N/A' }}</td> -->
                <td>{{ booking.userId }}</td>
                <td>{{ booking.parkingId }}</td>
                <td>{{ booking.placeId }}</td>
                <td>{{ formatTimestamp(booking.startTime) }}</td>
                <td>{{ formatTimestamp(booking.endTime) }}</td>
                <td>
                  <button (click)="editBooking(booking)" class="edit-btn">Edit</button>
                  <!-- <button (click)="deleteBooking(booking.id)" class="delete-btn">Delete</button> -->
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="bookings.length === 0" class="no-data">
            No bookings found
          </div>
        </div>
                    

      </div>

      <!-- Places Tab -->
      <div *ngIf="activeTab === 'places'" class="tab-content">
        <div class="section-header">
          <h2>Places Management</h2>
          <div class="actions">
            <button (click)="showAddPlaceForm = !showAddPlaceForm" class="add-btn">
              {{ showAddPlaceForm ? 'Cancel' : 'Add Place' }}
            </button>
            <button (click)="loadPlaces()" class="refresh-btn">Refresh</button>
          </div>
        </div>

        <!-- Add Place Form -->
        <div *ngIf="showAddPlaceForm" class="form-container">
          <form (ngSubmit)="addPlace()" #placeForm="ngForm">
            <div class="form-row">
              <div class="form-group">
                <label for="placeNumber">Place Number:</label>
                <input 
                  type="number" 
                  id="placeNumber" 
                  [(ngModel)]="newPlace.number" 
                  name="number" 
                  required>
              </div>
              <div class="form-group">
                <label for="parkingId">Parking ID:</label>
                <input 
                  type="number" 
                  id="parkingId" 
                  [(ngModel)]="newPlace.parkingId" 
                  name="parkingId" 
                  required>
              </div>
              <div class="form-group">
                <label for="status">Status:</label>
                <select id="status" [(ngModel)]="newPlace.status" name="status" required>
                  <option value="">Select Status</option>
                  <option *ngFor="let status of statusOptions" [value]="status">
                    {{ status }}
                  </option>
                </select>
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" [disabled]="!placeForm.form.valid" class="submit-btn">
                Add Place
              </button>
            </div>
          </form>
        </div>
<div *ngIf="showEditPlaceForm" class="form-container">
    <h3>Edit Place</h3>
    <form (ngSubmit)="updatePlace()" #editPlaceForm="ngForm">
      <div class="form-row">
        <div class="form-group">
          <label for="editPlaceNumber">Place Number:</label>
          <input 
            type="number" 
            id="editPlaceNumber" 
            [(ngModel)]="editPlaceData.number" 
            name="editNumber" 
            required>
        </div>
        <div class="form-group">
          <label for="editParkingId">Parking ID:</label>
          <input 
            type="number" 
            id="editParkingId" 
            [(ngModel)]="editPlaceData.parkingId" 
            name="editParkingId" 
            required>
        </div>
        <div class="form-group">
          <label for="editStatus">Status:</label>
          <select id="editStatus" [(ngModel)]="editPlaceData.status" name="editStatus" required>
            <option value="">Select Status</option>
            <option *ngFor="let status of statusOptions" [value]="status">
              {{ status }}
            </option>
          </select>
        </div>
      </div>
      <div class="form-actions">
        <button type="submit" [disabled]="!editPlaceForm.form.valid" class="submit-btn">
          Update Place
        </button>
        <button type="button" (click)="cancelEdit()" class="cancel-btn">
          Cancel
        </button>
      </div>
    </form>
  </div>
        <!-- Places Table -->
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Place ID</th>
                <th>Number</th>
                <th>Parking ID</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let place of places; trackBy: trackByPlaceId">
                <td>{{ place.placeId }}</td>
                <td>{{ place.number }}</td>
                <td>{{ place.parkingId }}</td>
                <td>
                  <span [class]="'status-badge ' + place.status.toLowerCase()">
                    {{ place.status }}
                  </span>
                </td>
                <td>
                  <button (click)="editPlace(place)" class="edit-btn">Edit</button>
                  <button (click)="deletePlace(place.placeId)" class="delete-btn">Delete</button>
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="places.length === 0" class="no-data">
            No places found
          </div>
        </div>


          
      </div>

       <div *ngIf="activeTab === 'users'" class="tab-content">
        <div class="section-header">
          <h2>users</h2>
        </div>
        
<div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>user ID</th>
                <th>userName</th>
                <th>email</th>
                <th>role</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let user of users; trackBy: trackByUserId">
                <td>{{ user.id }}</td>
                <td>{{ user.name}}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.role }}</td>
                <!-- <td>
                  <span [class]="'status-badge ' + user.status.toLowerCase()">
                    {{ place.status }}
                  </span>
                </td> -->
                <td>
                  <button class="edit-btn">Edit</button>
                  <button  class="delete-btn">Delete</button>
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="users.length === 0" class="no-data">
            No users found
          </div>
        </div>
        </div>
      <!-- Analytics Tab -->
      <div *ngIf="activeTab === 'analytics'" class="tab-content">
        <div class="section-header">
          <h2>Analytics & Reports</h2>
        </div>
        
        <div class="analytics-grid">
          <div class="chart-container">
            <h3>Place Status Distribution</h3>
            <div class="pie-chart">
              <div class="chart-legend">
                <div class="legend-item">
                  <span class="legend-color available"></span>
                  Available: {{ stats.availablePlaces }}
                </div>
                <div class="legend-item">
                  <span class="legend-color occupied"></span>
                  Occupied: {{ stats.occupiedPlaces }}
                </div>
                <div class="legend-item">
                  <span class="legend-color reserved"></span>
                  Reserved: {{ stats.reservedPlaces }}
                </div>
                <div class="legend-item">
                  <span class="legend-color blocked"></span>
                  Blocked: {{ stats.blockedPlaces }}
                </div>
              </div>
            </div>
          </div>
          
          <div class="metrics-container">
            <h3>Key Metrics</h3>
            <div class="metric-item">
              <span class="metric-label">Occupancy Rate:</span>
              <span class="metric-value">{{ getOccupancyRate() }}%</span>
            </div>
            <div class="metric-item">
              <span class="metric-label">Available Rate:</span>
              <span class="metric-value">{{ getAvailabilityRate() }}%</span>
            </div>
            <div class="metric-item">
              <span class="metric-label">Total Capacity:</span>
              <span class="metric-value">{{ stats.totalPlaces }}</span>
            </div>
          </div>
        </div>
      </div>
<div *ngIf="activeTab === 'Parkings'" class="tab-content">
        <div class="section-header">
          <h2>Parkings</h2>
           <div class="actions">
            <button (click)="showAddParkingForm = !showAddParkingForm" class="add-btn">
              {{ showAddParkingForm ? 'Cancel' : 'Add Parking' }}
            </button>
            <button (click)="loadParkings()" class="refresh-btn">Refresh</button>
          </div>
        </div>
        
           <!-- Add Parking Form -->
        <div *ngIf="showAddParkingForm" class="form-container">
          <form (ngSubmit)="addParking()" #parkingForm="ngForm">
            <div class="form-row">
              <div class="form-group">
                <label for="parkingName">Parking Name:</label>
                <input 
                  type="text" 
                  id="parkingName" 
                  [(ngModel)]="newParking.name" 
                  name="parkingName" 
                  required>
              </div>
              <div class="form-group">
                <label for="capacity">Parking capacity:</label>
                <input 
                  type="number" 
                  id="capacity" 
                  [(ngModel)]="newParking.capacity" 
                  name="capacity" 
                  required>
              </div>
              <div class="form-group">
                <label for="opening_hours">opening_hours:</label>
               <input 
                  type="text" 
                  id="opening_hours" 
                  [(ngModel)]="newParking.opening_hours" 
                  name="opening_hours" 
                  required>
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" [disabled]="!parkingForm.form.valid" class="submit-btn">
                Add Parking
              </button>
            </div>
          </form>
        </div>

<div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>parking ID</th>
                <th>parking Name</th>
                <th>capacity</th>
                <th>opening_hours</th>
                <th>available Places<th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let parking of parkings; trackBy: trackByParkingId">
                <td>{{ parking.parkingId }}</td>
                <td>{{ parking.name}}</td>
                <td>{{ parking.capacity }}</td>
                <td>{{ parking.opening_hours }}</td>
                <td>{{ parking.avaible_places }}</td>
                <!-- <td>
                  <span [class]="'status-badge ' + user.status.toLowerCase()">
                    {{ place.status }}
                  </span>
                </td> -->
                <td>
                  <button class="edit-btn" >Edit</button>
                  <button  class="delete-btn" (click)="deleteParking(parking.parkingId!)">Delete</button>
                </td>
              </tr>
            </tbody>
          </table>
          <div *ngIf="parkings.length===0" class="no-data">
            No parking  found
          </div>
        </div>
        </div>
      
        
      <!-- Loading Overlay -->
      <div *ngIf="loading" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
      </div>

      <!-- Error Message -->
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
        <button (click)="errorMessage = ''" class="close-btn">√ó</button>
      </div>

      <!-- Success Message -->
      <div *ngIf="successMessage" class="success-message">
        {{ successMessage }}
        <button (click)="successMessage = ''" class="close-btn">√ó</button>
      </div>
    </div>