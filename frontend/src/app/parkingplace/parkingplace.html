<main class="main-content">
    <div class="welcome-section">
        <h1 class="welcome-title">Available Parking Places</h1>
        <p class="welcome-subtitle">Choose your perfect parking spot üöó</p>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
        <div class="loading-spinner">‚è≥</div>
        <p>Loading available places...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="errorMessage" class="error-container">
        <div class="error-icon">‚ùå</div>
        <p class="error-message">{{ errorMessage }}</p>
        <button (click)="loadPlacesForParking(parking)" class="retry-btn">Try Again</button>
    </div>

    <!-- Places Grid -->
    <div *ngIf="!loading && !errorMessage" class="places-grid">
        <div *ngFor="let place of places; trackBy: trackByPlaceNumber" class="place-card">
            <div class="place-header">
                <div class="place-info">
                    <h3 class="place-name">Place {{ place.number }}</h3>
                    <p class="place-status-text">Status: {{ getStatusText(place.status) }}</p>
                </div>
                <div class="place-icon">
                    <span [ngClass]="getPlaceIconClass(place.status)">
                        {{ getPlaceIcon(place.status) }}
                    </span>
                </div>
            </div>
                             
            <div class="place-details">
                <div class="detail-row">
                    <span class="detail-label">Place Number:</span>
                    <span class="detail-value">#{{ place.number }}</span>
                </div>
              
                <div class="detail-row">
                    <span class="detail-label">Current Status:</span>
                    <span class="detail-value" [ngClass]="getStatusTextClass(place.status)">
                        {{ getStatusText(place.status) }}
                    </span>
                </div>
            </div>
             
            <!-- Status Badge -->
            <div class="place-status">
                <span class="status-badge" 
                      [ngClass]="getStatusClass(place.status)">
                    {{ getStatusText(place.status) }}
                </span>
            </div>
             
            <!-- Action Buttons -->
            <div class="place-actions">
                <button class="action-btn primary" 
                        (click)="selectPlace(place)"
                        [disabled]="!canSelectPlace(place)">
                        Reserve
                </button>
            </div>
        </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && !errorMessage && places.length === 0" class="empty-state">
        <div class="empty-icon">üö´</div>
        <h3>No Places Available</h3>
        <p>There are currently no parking places available at this location.</p>
        <div class="empty-actions">
            <button (click)="loadPlacesForParking(parking)" class="retry-btn">Refresh</button>
            <button (click)="goBack()" class="back-btn-alt">Go Back</button>
        </div>
    </div>
</main>

<div>
     <button (click)="goBack()" class="back-btn-alt">Go Back</button>
</div>

<!-- BOOKING MODAL - Outside main content -->
<div *ngIf="showBookingModal" class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Reserve Parking Place</h2>
      <button (click)="closeBookingModal()" class="close-btn">&times;</button>
    </div>
    
    <div class="modal-body">
      <div *ngIf="selectedPlace" class="selected-place-info">
        <h3>Place {{ selectedPlace.number }}</h3>
        <p>Status: {{ getStatusText(selectedPlace.status) }}</p>
      </div>

      <div class="form-group">
        <label for="startTime">Start Time:</label>
        <input 
          type="time" 
          id="startTime" 
          [(ngModel)]="startTime" 
          class="form-control"
          required>
      </div>

      <div class="form-group">
        <label for="endTime">End Time:</label>
        <input 
          type="time" 
          id="endTime" 
          [(ngModel)]="endTime" 
          class="form-control"
          required>
      </div>

      <div *ngIf="bookingError" class="error-message">
        {{ bookingError }}
      </div>
    </div>

    <div class="modal-footer">
      <button 
        (click)="closeBookingModal()" 
        class="btn btn-secondary"
        [disabled]="bookingInProgress">
        Cancel
      </button>
      <button 
        (click)="submitBooking()" 
        class="btn btn-primary"
        [disabled]="bookingInProgress">
        <span *ngIf="bookingInProgress">Processing...</span>
        <span *ngIf="!bookingInProgress">Confirm Booking</span>
      </button>
    </div>
  </div>
</div>